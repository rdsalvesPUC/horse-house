<!DOCTYPE html>
<html lang="pt-BR">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Login</title>
		<link rel="stylesheet" href="/styles/output.css" />
	</head>
	<body class="bg-primary">
		<header class="w-full flex items-center p-2">
			<img src="/assets/images/logo-h-whitebg.svg">
		</header>
		<div class="max-w-4xl mx-auto bg-tertiary p-6 rounded-lg shadow-lg">
			<h2 id="titulo-cadastro" class="text-3xl font-semibold text-gray-800 mb-6 text-center">Login</h2>
			<form id="userForm" class="space-y-4">
				<div>
					<label class="block font-medium">Email</label>
					<input type="text" id="Email" class="text-sm text-gray-700 w-full p-3 border rounded-md focus:ring-2 focus:ring-secondary outline-none" />
				</div>
				<div>
					<label class="block font-medium">Senha</label>
					<input type="password" id="Senha" class="text-sm text-gray-700 w-full p-3 border rounded-md focus:ring-2 focus:ring-secondary outline-none" />
				</div>
				<button id="botao-cadastrar" type="submit" class="w-full md:col-span-2 py-3 text-white bg-secondary rounded-md transition duration-300 ease-in-out hover:bg-primary mt-3 mb-4">Logar</button>
			</form>
		</div>
	</body>
	<script>
		document.getElementById("userForm").addEventListener("submit", function(event) {
			event.preventDefault(); // Impede o reload da p치gina
		
			const email = document.getElementById("Email").value;
			const senha = document.getElementById("Senha").value;
		
			fetch("http://localhost:3000/api/login", {
				method: "POST",
				headers: {
					"Content-Type": "application/json"
				},
				body: JSON.stringify({ email, senha })
			})
			.then(response => {
				if (!response.ok) {
					throw new Error("Login inv치lido");
				}
				return response.json();
			})
			.then(data => {
				console.log("Login bem-sucedido:", data);
				alert("Login realizado com sucesso!");
		
				// Salva o token e o tipo de usu치rio no localStorage
				localStorage.setItem("token", data.token);
				localStorage.setItem("userType", data.userType);
		
				// Redireciona para a p치gina do painel
				window.location.href = "/create-users";
			})
			.catch(error => {
				console.error("Erro no login:", error);
				alert("Email ou senha incorretos.");
			});
		});
		</script>
				
</html>